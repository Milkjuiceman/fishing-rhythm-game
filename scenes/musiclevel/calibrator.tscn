[gd_scene load_steps=9 format=3 uid="uid://vkl7nxvcmfdt"]

[ext_resource type="Script" uid="uid://cn4lquysuylw3" path="res://rhythm/Calibrator/calibrator.gd" id="1_0trkm"]
[ext_resource type="Script" uid="uid://cwfsltgcebhwi" path="res://rhythm/Calibrator/calibration_progress.gd" id="2_cq8f8"]
[ext_resource type="Script" uid="uid://doqdud5lw0u0i" path="res://rhythm/Calibrator/calibrator_music_player.gd" id="2_psl0u"]
[ext_resource type="Script" uid="uid://dwbkyrumvklje" path="res://rhythm/Calibrator/calibrator_referee.gd" id="3_cq8f8"]
[ext_resource type="Script" uid="uid://bqyr7p80je748" path="res://scenes/musiclevel/calabration_offset.gd" id="3_u3vhk"]
[ext_resource type="Resource" uid="uid://d22gw4d8i50df" path="res://assets/audio/charts/calibrator_metronome.tres" id="4_psl0u"]
[ext_resource type="Script" uid="uid://cx3d6kt3ecw0k" path="res://rhythm/Calibrator/calibrator_judge.gd" id="4_u3vhk"]
[ext_resource type="Script" uid="uid://c4kk6eysopqg1" path="res://rhythm/Calibrator/calibrator_input_hit.gd" id="5_tepaq"]

[node name="Calibrator" type="Node3D" node_paths=PackedStringArray("referee")]
script = ExtResource("1_0trkm")
referee = NodePath("AudioStreamPlayer/Referee")

[node name="Camera3D" type="Camera3D" parent="."]

[node name="HUD" type="CanvasLayer" parent="Camera3D"]

[node name="ProgressBar" type="ProgressBar" parent="Camera3D/HUD"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -142.0
offset_top = -13.5
offset_right = 142.0
offset_bottom = 13.5
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("2_cq8f8")

[node name="Offset" type="Label" parent="Camera3D/HUD"]
offset_right = 40.0
offset_bottom = 23.0
script = ExtResource("3_u3vhk")

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
script = ExtResource("2_psl0u")

[node name="Referee" type="Node" parent="AudioStreamPlayer" node_paths=PackedStringArray("music_player", "input_hit", "judge")]
script = ExtResource("3_cq8f8")
chart = ExtResource("4_psl0u")
music_player = NodePath("..")
input_hit = NodePath("../../InputHit")
judge = NodePath("../../Judge")

[node name="Judge" type="Node" parent="."]
script = ExtResource("4_u3vhk")

[node name="InputHit" type="Node" parent="."]
script = ExtResource("5_tepaq")

[connection signal="play_chart_now" from="AudioStreamPlayer/Referee" to="AudioStreamPlayer" method="_on_referee_play_chart_now"]
[connection signal="play_chart_now" from="AudioStreamPlayer/Referee" to="Judge" method="_on_referee_play_chart_now"]
[connection signal="process" from="AudioStreamPlayer/Referee" to="Camera3D/HUD/ProgressBar" method="_on_referee_process"]
[connection signal="process" from="AudioStreamPlayer/Referee" to="Camera3D/HUD/Offset" method="_on_referee_process"]
